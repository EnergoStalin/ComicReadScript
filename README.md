# 简介

这是我自用的用于改善 300 PC端使用体验的油猴脚本，写这个脚本的初衷就是为了能看到完整的漫画跨页。在论坛的漫画区看漫画时经常就会遇到跨页，大部分情况下原本连续的跨页都会被分割成两页，阅读起来十分别扭。我一开始选择下载到本地后用其他阅读软件阅读，但一来麻烦，二来PC端的阅读软件总有各种各样的BUG和瑕疵，虽然无伤大雅但每次遇到还是觉得不舒服。所以索性写了这个脚本。后来又在S1上看到这个帖子——[https://bbs.saraba1st.com/2b/thread-1575248-1-1.html](https://bbs.saraba1st.com/2b/thread-1575248-1-1.html)，记录帖子阅读历史和显示新增回复数的功能非常实用，所以我也将这两个功能加了进来，在此表示感谢。

# 安装

使用脚本需要安装有 Tampermonkey ，直接到 [官网](http://tampermonkey.net/index.php) 根据自己的浏览器和浏览器版本下载对应扩展安装即可。
安装完扩展后点击此 [链接](https://github.com/hymbz/YamiboScript/raw/master/YamiboScript.user.js) 安装本脚本。

# 脚本功能

- 增加漫画阅读模式，改善在线阅读漫画的体验
- 记录帖子的阅读历史，可快速跳转至上次阅读位置，同时显示帖子至上次阅读为止，新增了多少条回复
- 各种无关紧要的小功能（如固定顶部导航栏、关闭快捷导航的跳转等）

### 待实现功能
- 图墙模式
- 在漫画阅读模式里增加页数的显示和跳转功能

# 功能描述

## 设置

脚本的设置入口在顶栏的「设置」里
![](http://ws1.sinaimg.cn/large/6d4090c8gy1frp0bz4wr4j20v702t445.jpg)

修改完设置需要关闭设置框才会生效。

## 漫画阅读

### 入口

移动到帖子一楼顶端这个位置后![](http://wx3.sinaimg.cn/large/6d4090c8gy1frkne5skvqj20my02gmx4.jpg)
可以看到多出来一个漫画阅读的选项![](http://wx3.sinaimg.cn/large/6d4090c8gy1frknejh46wj20my02ajrd.jpg)

点击进入漫画阅读模式。

### 功能描述

#### 左下角的功能按钮

点击![](http://wx3.sinaimg.cn/large/6d4090c8gy1frkobzoaybj200o00k07q.jpg)退出阅读模式，同时移至网页顶部。如果之后再进入阅读模式会自动跳转回刚才的阅读进度。

点击![](http://wx3.sinaimg.cn/large/6d4090c8gy1frko79e4fwj201000m083.jpg)打开侧边栏，可在侧边栏中修改相关设置，但不会保存，想修改全局默认设置的话请到脚本设置页面中设置。

#### 结束的END

滚动到最后会有一个END出现，点击后退出阅读模式的同时跳转至评论，阅读进度也会重置。

#### 双页模式

漫画阅读可切换双页模式和单页模式。双页模式下图片按照日本漫画习惯从右到左排序。

#### 页面填充

日本漫画奇数页在左，偶数页在右，所以第一页通常是在左边。而为了保证被分割成两页后的跨页图能拼在一起，就得在开头填充进一个空白页填补右页的空白。
不过有些汉化组会把宣传图放在漫画开头，所以这个功能也得视情况开启。

#### 点击翻页

翻页默认是通过鼠标滚轮上下滚动翻页的，但因为是滚动一次翻一页，所以在平板或笔记本上不用鼠标进行滚动时很难控制。开启这个功能后就可以通过点击屏幕来翻页了。

#### 注意事项

开启此功能后论坛自带的图片懒加载功能将会失效。原本图片只会在页面滚动至用户能看见后才会开始加载，开启此功能后，所有图片会从一开始就开始加载。

## 记录阅读历史

![](http://wx3.sinaimg.cn/large/6d4090c8gy1frkpi4a2ikj207u00yq2q.jpg)
这个功能是用来快速回到帖子上次阅读进度的。开启后，每个帖子后面都会跟着一个跳转至上次阅读位置的TAG，点击即可跳转至上次阅读进度（阅读进度不仅包括了页数也包括了楼层数），后面跟着的数字是上次阅读后新增的回复数。

颜色默认是论坛的深褐色，可以在设置中改成任意喜欢的颜色。
阅读进度默认永久保存，可在设置中设置保留天数。如果一个已经记录了进度的帖子在超过保留天数后依然没有点进去阅读的话其阅读进度就会被删除。想删掉所有阅读进度的话就设为0，保存设置，刷新，即可。-1表示永久保存。

## 功能增强

这是些无关紧要的小功能的集合。

### 关闭快捷导航的跳转

顶部导航条的快捷导航可以方便地在各个板块之间跳转，但默认情况下只能通过鼠标悬浮的方式显示其板块菜单，直接点击的话会跳转至论坛主页，这在平板上很不方便，所以有了这个功能。功能很简单，就是关掉快捷导航的点击跳转，只保留悬浮显示菜单的功能。

### 固定导航条

快捷导航的跳转是很方便，但每次跳转都要把网页滚到顶部去就有点麻烦了。开启这个功能可以将顶部的导航条固定住，不管怎么滚动都始终保持在页面顶部。

### 修正点击页数时的跳转判定

![](http://wx3.sinaimg.cn/large/6d4090c8gy1frkqbxkztij20vb01c0sn.jpg)
明明在板块顶部有个“新窗”的选项来选择帖子的默认打开位置，但即使勾上了新窗，通过点击帖子后面的页数打开的页面还是会在当前页打开。开启这个功能可以补上这个缺漏。
